# æ²¹ç”°é’»äº•æ•°æ®æŸ¥è¯¢ MCP Server - éƒ¨ç½²å¯åŠ¨æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [å¿«é€Ÿå¼€å§‹ï¼ˆ5åˆ†é’Ÿï¼‰](#å¿«é€Ÿå¼€å§‹)
2. [è¯¦ç»†éƒ¨ç½²æ­¥éª¤](#è¯¦ç»†éƒ¨ç½²æ­¥éª¤)
3. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
4. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)
5. [LibreChaté›†æˆ](#librechaté›†æˆ)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–ï¼ˆ2åˆ†é’Ÿï¼‰

æ‰“å¼€å‘½ä»¤è¡Œï¼Œæ‰§è¡Œï¼š

```powershell
cd d:\work\joyagent\gemini-ge
pip install -r requirements.txt
```

### ç¬¬äºŒæ­¥ï¼šæµ‹è¯•åŠŸèƒ½ï¼ˆ1åˆ†é’Ÿï¼‰

åŒå‡»è¿è¡Œ `run_test.bat` æˆ–æ‰§è¡Œï¼š

```powershell
python test_server.py
```

ä½ ä¼šçœ‹åˆ°13ä¸ªæµ‹è¯•ç”¨ä¾‹çš„æ‰§è¡Œç»“æœï¼Œç¡®è®¤æ‰€æœ‰åŠŸèƒ½æ­£å¸¸ã€‚

### ç¬¬ä¸‰æ­¥ï¼šé…ç½® Claude Desktopï¼ˆ2åˆ†é’Ÿï¼‰

1. æŒ‰ `Win + R`ï¼Œè¾“å…¥ `%APPDATA%\Claude`ï¼Œæ‰“å¼€ Claude é…ç½®ç›®å½•

2. åˆ›å»ºæˆ–ç¼–è¾‘ `claude_desktop_config.json` æ–‡ä»¶ï¼š

```json
{
  "mcpServers": {
    "oilfield-intel": {
      "command": "python",
      "args": [
        "D:/work/joyagent/gemini-ge/oilfield_mcp_server.py"
      ],
      "env": {
        "USER_ROLE": "admin"
      }
    }
  }
}
```

**æ³¨æ„ï¼š** è·¯å¾„æ”¹æˆä½ çš„å®é™…è·¯å¾„ï¼

3. é‡å¯ Claude Desktop

### ğŸ¯ ç¬¬ä¸€æ¬¡å¯¹è¯

åœ¨ Claude Desktop ä¸­å°è¯•ï¼š

```
ç”¨æˆ·ï¼šæŸ¥è¯¢ä¸€ä¸‹Block-AåŒºå—æœ‰å“ªäº›äº•ï¼Ÿ
```

Claude ä¼šè°ƒç”¨ `search_wells` å·¥å…·ï¼Œè¿”å›åŒºå—ä¸‹æ‰€æœ‰äº•çš„åˆ—è¡¨ã€‚

```
ç”¨æˆ·ï¼šå¯¹æ¯”ZT-102å’ŒZT-105è°é’»å¾—æ›´å¿«ï¼Ÿ
```

Claude ä¼šè°ƒç”¨ `compare_drilling_pace` å·¥å…·ï¼Œå±•ç¤ºä¸¤å£äº•çš„é€Ÿåº¦å¯¹æ¯”ã€‚

---

## ğŸ“¦ è¯¦ç»†éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–

æ‰“å¼€å‘½ä»¤è¡Œï¼ˆPowerShell æˆ– CMDï¼‰ï¼Œè¿›å…¥é¡¹ç›®ç›®å½•ï¼š

```powershell
cd d:\work\joyagent\gemini-ge

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows PowerShell:
.\venv\Scripts\Activate.ps1
# Windows CMD:
.\venv\Scripts\activate.bat

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### ç¬¬äºŒæ­¥ï¼šæœ¬åœ°æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼ŒéªŒè¯æ‰€æœ‰åŠŸèƒ½ï¼š

```powershell
python test_server.py
```

ä½ ä¼šçœ‹åˆ°13ä¸ªæµ‹è¯•ç”¨ä¾‹çš„æ‰§è¡Œç»“æœï¼ŒåŒ…æ‹¬ï¼š
- âœ… äº•æœç´¢
- âœ… äº•æ¦‚è§ˆ
- âœ… æ—¥æŠ¥æŸ¥è¯¢
- âœ… NPTåˆ†æ
- âœ… å¤šäº•å¯¹æ¯”
- âœ… å‘¨æŠ¥ç”Ÿæˆ
- âœ… æƒé™æ§åˆ¶
- ç­‰ç­‰...

### ç¬¬ä¸‰æ­¥ï¼šé…ç½® Claude Desktop

#### 1. æ‰¾åˆ° Claude Desktop é…ç½®æ–‡ä»¶

Windows é…ç½®æ–‡ä»¶ä½ç½®ï¼š
```
%APPDATA%\Claude\claude_desktop_config.json
```

å¿«é€Ÿæ‰“å¼€æ–¹å¼ï¼š
1. æŒ‰ `Win + R` æ‰“å¼€è¿è¡Œå¯¹è¯æ¡†
2. è¾“å…¥ï¼š`%APPDATA%\Claude`
3. æ‰¾åˆ°æˆ–åˆ›å»º `claude_desktop_config.json` æ–‡ä»¶

#### 2. ç¼–è¾‘é…ç½®æ–‡ä»¶

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºå®ƒã€‚å¦‚æœå·²å­˜åœ¨ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```json
{
  "mcpServers": {
    "oilfield-intel": {
      "command": "D:/work/joyagent/gemini-ge/venv/Scripts/python.exe",
      "args": [
        "D:/work/joyagent/gemini-ge/oilfield_mcp_server.py"
      ],
      "env": {
        "USER_ROLE": "admin"
      }
    }
  }
}
```

**é‡è¦æç¤ºï¼š**
- ä½¿ç”¨**ç»å¯¹è·¯å¾„**
- å¦‚æœä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œ`command` æŒ‡å‘è™šæ‹Ÿç¯å¢ƒä¸­çš„ `python.exe`
- å¦‚æœæ²¡ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œ`command` å¯ä»¥ç›´æ¥ç”¨ `python`
- è·¯å¾„ä¸­çš„åæ–œæ  `\` è¦æ”¹æˆæ­£æ–œæ  `/` æˆ–ä½¿ç”¨åŒåæ–œæ  `\\`

#### 3. éªŒè¯é…ç½®

é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ˆå®Œæ•´ç‰ˆï¼‰ï¼š

```json
{
  "mcpServers": {
    "oilfield-intel": {
      "command": "D:/work/joyagent/gemini-ge/venv/Scripts/python.exe",
      "args": [
        "D:/work/joyagent/gemini-ge/oilfield_mcp_server.py"
      ],
      "env": {
        "USER_ROLE": "admin",
        "PYTHONIOENCODING": "utf-8"
      }
    }
  },
  "globalShortcut": "Ctrl+Space"
}
```

### ç¬¬å››æ­¥ï¼šé‡å¯ Claude Desktop

1. å®Œå…¨é€€å‡º Claude Desktopï¼ˆç¡®ä¿æ²¡æœ‰åå°è¿›ç¨‹ï¼‰
2. é‡æ–°å¯åŠ¨ Claude Desktop
3. æ‰“å¼€ä¸€ä¸ªæ–°å¯¹è¯

### ç¬¬äº”æ­¥ï¼šæµ‹è¯•å¯¹è¯

åœ¨ Claude Desktop ä¸­å°è¯•ä»¥ä¸‹å¯¹è¯ï¼š

#### æµ‹è¯• 1ï¼šæœç´¢äº•
```
ç”¨æˆ·ï¼šæŸ¥è¯¢ä¸€ä¸‹Block-AåŒºå—æœ‰å“ªäº›äº•ï¼Ÿ
```

#### æµ‹è¯• 2ï¼šäº•æ¦‚è§ˆ
```
ç”¨æˆ·ï¼šZT-102äº•çš„åŸºæœ¬ä¿¡æ¯æ˜¯ä»€ä¹ˆï¼Ÿ
```

#### æµ‹è¯• 3ï¼šå¤šäº•å¯¹æ¯”
```
ç”¨æˆ·ï¼šå¯¹æ¯”ZT-102å’ŒZT-105è°é’»å¾—æ›´å¿«ï¼Ÿ
```

#### æµ‹è¯• 4ï¼šç”ŸæˆæŠ¥å‘Š
```
ç”¨æˆ·ï¼šå¸®æˆ‘ç”ŸæˆZT-102äº•åœ¨2023å¹´11æœˆ1æ—¥åˆ°11æœˆ7æ—¥çš„å‘¨æŠ¥
```

#### æµ‹è¯• 5ï¼šåŒºå—æŠ¥å‘Š
```
ç”¨æˆ·ï¼šç”ŸæˆBlock-AåŒºå—11æœˆä»½çš„æ±‡æ€»æŠ¥å‘Š
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### é…ç½®ä¸åŒçš„ç”¨æˆ·è§’è‰²

ä¿®æ”¹ `claude_desktop_config.json` ä¸­çš„ `USER_ROLE`ï¼š

```json
{
  "env": {
    "USER_ROLE": "engineer"  // å¯é€‰ï¼šadmin, engineer, viewer, default
  }
}
```

ä¸åŒè§’è‰²çš„æƒé™ï¼š
- **admin**: æ‰€æœ‰äº•å’ŒåŒºå—çš„å®Œå…¨è®¿é—®
- **engineer**: Block-Açš„ZT-102å’ŒZT-105äº•
- **viewer**: ä»…ZT-102äº•åªè¯»
- **default**: æ— æƒé™ï¼ˆç”¨äºæµ‹è¯•ï¼‰

### åˆ‡æ¢åˆ°çœŸå®æ•°æ®åº“

ç¼–è¾‘ `oilfield_mcp_server.py` ç¬¬176è¡Œï¼š

#### è¿æ¥ PostgreSQL
```python
engine = create_engine(
    'postgresql://username:password@localhost:5432/oilfield_db',
    echo=False
)
```

#### è¿æ¥ MySQL
```python
engine = create_engine(
    'mysql+pymysql://username:password@localhost:3306/oilfield_db',
    echo=False
)
```

#### è¿æ¥ SQL Server
```python
engine = create_engine(
    'mssql+pyodbc://username:password@server/database?driver=ODBC+Driver+17+for+SQL+Server',
    echo=False
)
```

**æ³¨æ„äº‹é¡¹ï¼š**
1. å®‰è£…å¯¹åº”çš„æ•°æ®åº“é©±åŠ¨ï¼ˆå¦‚ `psycopg2`ã€`pymysql`ã€`pyodbc`ï¼‰
2. æ³¨é‡Šæ‰ç¬¬194è¡Œçš„ `seed_mock_data()` è°ƒç”¨
3. ç¡®ä¿æ•°æ®åº“ä¸­æœ‰å¯¹åº”çš„è¡¨ç»“æ„

### è‡ªå®šä¹‰æƒé™é…ç½®

ç¼–è¾‘ `oilfield_mcp_server.py` ç¬¬34-39è¡Œï¼š

```python
USER_PERMISSIONS = {
    "admin": {"wells": "*", "blocks": "*", "role": "admin"},
    "engineer": {"wells": ["ZT-102", "ZT-105", "ZT-108"], "blocks": ["Block-A"], "role": "engineer"},
    "viewer": {"wells": ["ZT-102"], "blocks": ["Block-A"], "role": "viewer"},
    "custom_role": {"wells": ["XY-009"], "blocks": ["Block-B"], "role": "custom"},
}
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šClaude Desktop æ— æ³•è¯†åˆ« MCP Server

**ç—‡çŠ¶**ï¼šåœ¨ Claude ä¸­æ— æ³•çœ‹åˆ°å·¥å…·è°ƒç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `claude_desktop_config.json` æ–‡ä»¶ä½ç½®æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ JSON æ ¼å¼æ­£ç¡®ï¼ˆä½¿ç”¨ JSONLint éªŒè¯ï¼‰
3. ç¡®ä¿è·¯å¾„ä½¿ç”¨ç»å¯¹è·¯å¾„
4. æ£€æŸ¥ Python è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆè¿è¡Œ `where python` æŸ¥çœ‹ï¼‰
5. å®Œå…¨é‡å¯ Claude Desktopï¼ˆä»»åŠ¡ç®¡ç†å™¨ä¸­ç»“æŸè¿›ç¨‹ï¼‰
6. æŸ¥çœ‹ Claude Desktop çš„æ—¥å¿—æ–‡ä»¶ï¼ˆé€šå¸¸åœ¨ `%APPDATA%\Claude\logs`ï¼‰

### é—®é¢˜ 2ï¼šæƒé™æ‹’ç»é”™è¯¯

**ç—‡çŠ¶**ï¼š
```
ğŸš« æƒé™æ‹’ç»ï¼šç”¨æˆ·è§’è‰² (engineer) æ— æƒè®¿é—®äº•å· XY-009ã€‚
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `USER_ROLE` ç¯å¢ƒå˜é‡è®¾ç½®
2. ç¡®è®¤è¯¥è§’è‰²åœ¨ `USER_PERMISSIONS` ä¸­æœ‰å¯¹åº”çš„æƒé™é…ç½®
3. å¦‚æœéœ€è¦è®¿é—®è¯¥äº•ï¼Œä¿®æ”¹æƒé™é…ç½®æˆ–æ›´æ¢è§’è‰²

### é—®é¢˜ 3ï¼šä¾èµ–å®‰è£…å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
ModuleNotFoundError: No module named 'fastmcp'
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```powershell
# é‡æ–°å®‰è£…ä¾èµ–
pip install --upgrade pip
pip install -r requirements.txt

# å¦‚æœç‰¹å®šåŒ…å¤±è´¥ï¼Œå•ç‹¬å®‰è£…
pip install fastmcp
pip install sqlalchemy
pip install pandas
```

### é—®é¢˜ 4ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
sqlalchemy.exc.OperationalError: ...
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤æ•°æ®åº“æœåŠ¡æ˜¯å¦è¿è¡Œ
3. æ£€æŸ¥ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
4. ç¡®è®¤ç½‘ç»œè¿æ¥ï¼ˆé˜²ç«å¢™/ç«¯å£ï¼‰
5. å¦‚æœæ˜¯ç”Ÿäº§æ•°æ®åº“ï¼Œç¡®ä¿å·²æ³¨é‡Šæ‰ `seed_mock_data()`

### é—®é¢˜ 5ï¼šä¸­æ–‡æ˜¾ç¤ºä¹±ç 

**è§£å†³æ–¹æ¡ˆ**ï¼š
åœ¨ `claude_desktop_config.json` ä¸­æ·»åŠ ï¼š
```json
{
  "env": {
    "PYTHONIOENCODING": "utf-8",
    "LANG": "zh_CN.UTF-8"
  }
}
```

### é—®é¢˜ 6ï¼šæŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—

åœ¨ PowerShell ä¸­æ‰‹åŠ¨è¿è¡ŒæœåŠ¡å™¨æŸ¥çœ‹é”™è¯¯ï¼š

```powershell
cd d:\work\joyagent\gemini-ge
python oilfield_mcp_server.py
```

å¦‚æœå¯åŠ¨æˆåŠŸï¼Œä¼šçœ‹åˆ°æ¬¢è¿ä¿¡æ¯ã€‚å¦‚æœæœ‰é”™è¯¯ï¼Œä¼šæ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯å †æ ˆã€‚

---

## ğŸ“Š ä½¿ç”¨ MCP Inspector è°ƒè¯•

MCP Inspector æ˜¯å®˜æ–¹æä¾›çš„å¯è§†åŒ–è°ƒè¯•å·¥å…·ï¼š

### å®‰è£… Inspector

```powershell
# å®‰è£… Node.jsï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
# ä» https://nodejs.org/ ä¸‹è½½å®‰è£…

# å®‰è£… MCP Inspector
npm install -g @modelcontextprotocol/inspector
```

### å¯åŠ¨è°ƒè¯•

```powershell
cd d:\work\joyagent\gemini-ge
npx @modelcontextprotocol/inspector python oilfield_mcp_server.py
```

æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€è°ƒè¯•ç•Œé¢ï¼ˆé€šå¸¸æ˜¯ `http://localhost:5173`ï¼‰ï¼Œä½ å¯ä»¥ï¼š
- æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„å·¥å…·
- æ‰‹åŠ¨æµ‹è¯•æ¯ä¸ªå·¥å…·
- æŸ¥çœ‹è¾“å…¥/è¾“å‡º
- è°ƒè¯•é”™è¯¯

---

## ğŸŒ LibreChat é›†æˆ

### å‰ç½®è¦æ±‚

1. **å·²å®‰è£… LibreChat**
   - å¦‚æœæœªå®‰è£…ï¼Œå‚è€ƒï¼šhttps://www.librechat.ai/docs/local/npm
   
2. **å·²å®Œæˆæœ¬é¡¹ç›®ä¾èµ–å®‰è£…**
   ```bash
   pip install -r requirements.txt
   ```

### é…ç½®æ­¥éª¤

#### æ­¥éª¤ 1: é…ç½® LibreChat

å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° LibreChat çš„ `librechat.yaml` æ–‡ä»¶ï¼š

```yaml
version: 1.1.7

mcpServers:
  oilfield-data:
    command: python
    args:
      - "d:/work/joyagent/gemini-ge/oilfield_mcp_server.py"
    env:
      PYTHONIOENCODING: "utf-8"
      LOG_LEVEL: "INFO"
    description: "æ²¹ç”°é’»äº•æ•°æ®æŸ¥è¯¢æœåŠ¡"
    disabled: false

mcp:
  enabled: true
  timeout: 30000
  maxConnections: 10
```

#### æ­¥éª¤ 2: é‡å¯ LibreChat

```bash
cd C:\Projects\LibreChat
npm run backend
```

#### æ­¥éª¤ 3: ä½¿ç”¨ MCP å·¥å…·

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3080
2. åˆ›å»ºæ–°å¯¹è¯
3. åœ¨æ¨¡å‹è®¾ç½®ä¸­å¯ç”¨ "MCP Tools" æˆ– "oilfield-data"
4. å¼€å§‹æŸ¥è¯¢ï¼

### æµ‹è¯•æŸ¥è¯¢ç¤ºä¾‹

è¯•è¯•ä»¥ä¸‹æŸ¥è¯¢ï¼š

```
1. æŸ¥è¯¢æ‰€æœ‰æ­£åœ¨ä½œä¸šçš„æ²¹äº•
2. æœç´¢ Block-A åŒºå—çš„æ‰€æœ‰äº•
3. æŸ¥è¯¢ ZT-102 äº•çš„è¯¦ç»†ä¿¡æ¯
4. å¯¹æ¯” ZT-102 å’Œ ZT-105 çš„é’»è¿›é€Ÿåº¦
5. ç”Ÿæˆ Block-A åŒºå—çš„å‘¨æŠ¥
```

---

## ğŸ§ª è§’è‰²æƒé™æµ‹è¯•

### å¿«é€Ÿæµ‹è¯•æƒé™æ§åˆ¶

#### æ–¹å¼ 1: ä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼ˆæ¨èï¼‰

```powershell
# è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆæµ‹è¯•æ‰€æœ‰è§’è‰²ï¼‰
.\run_role_test.bat

# æˆ–ç›´æ¥è¿è¡Œ
$env:DEV_MODE="false"
python test_role_permissions.py
```

**æµ‹è¯•å†…å®¹**ï¼š
- è‡ªåŠ¨æµ‹è¯• adminã€engineerã€viewerã€default å››ä¸ªè§’è‰²
- éªŒè¯ 9 ç§ä¸åŒæŸ¥è¯¢åœºæ™¯
- ç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Š
- æ˜¾ç¤ºé€šè¿‡ç‡å’Œæƒé™å¯¹æ¯”è¡¨

**é¢„æœŸè¾“å‡ºç¤ºä¾‹**ï¼š
```
ğŸ§ª è§’è‰²æƒé™è‡ªåŠ¨åŒ–æµ‹è¯•
âœ… æµ‹è¯•é€šè¿‡: 36/36
ğŸ“ˆ é€šè¿‡ç‡: 100%
```

#### æ–¹å¼ 2: ç”Ÿæˆ LibreChat æµ‹è¯•é…ç½®

```powershell
# ç”Ÿæˆå¤šè§’è‰²é…ç½®æ–‡ä»¶
.\test_librechat_setup.ps1
```

è¿™ä¼šç”Ÿæˆï¼š
- `librechat_test_roles.yaml` - åŒ…å« 4 ä¸ªä¸åŒè§’è‰²çš„ MCP é…ç½®
- `LIBRECHAT_TEST_GUIDE.txt` - è¯¦ç»†æµ‹è¯•æ­¥éª¤æŒ‡å—

ç„¶ååœ¨ LibreChat ä¸­å¯ä»¥åˆ‡æ¢ä¸åŒçš„ MCP æœåŠ¡æµ‹è¯•ã€‚

### è¯¦ç»†æµ‹è¯•æŒ‡å—

å®Œæ•´çš„æµ‹è¯•æµç¨‹å’ŒéªŒè¯æ–¹æ³•ï¼Œè¯·å‚è€ƒï¼š
- [è§’è‰²æƒé™æµ‹è¯•æŒ‡å—.md](è§’è‰²æƒé™æµ‹è¯•æŒ‡å—.md)

---

## ğŸ” ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å»ºè®®

### 1. ç¯å¢ƒå˜é‡é…ç½®

ä¸è¦å°†æ•æ„Ÿä¿¡æ¯ç¡¬ç¼–ç ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```python
import os

DB_USER = os.getenv("DB_USER", "default_user")
DB_PASSWORD = os.getenv("DB_PASSWORD", "default_pass")

engine = create_engine(
    f'postgresql://{DB_USER}:{DB_PASSWORD}@localhost/oilfield_db'
)
```

### 2. æ—¥å¿—é…ç½®

é…ç½®æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ï¼š

```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler("oilfield_mcp.log"),
        logging.StreamHandler()
    ]
)
```

### 3. å¼‚å¸¸ç›‘æ§

è€ƒè™‘é›†æˆ Sentry æˆ–å…¶ä»–ç›‘æ§å·¥å…·ï¼š

```python
import sentry_sdk

sentry_sdk.init(
    dsn="your-sentry-dsn",
    traces_sample_rate=1.0
)
```

### 4. æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± 
- æ·»åŠ æŸ¥è¯¢ç¼“å­˜
- ä¼˜åŒ– SQL æŸ¥è¯¢ï¼ˆæ·»åŠ ç´¢å¼•ï¼‰
- é™åˆ¶è¿”å›æ•°æ®é‡

### 5. å®‰å…¨åŠ å›º

- å®ç° SQL æ³¨å…¥é˜²æŠ¤ï¼ˆä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼‰
- æ·»åŠ è¯·æ±‚é¢‘ç‡é™åˆ¶
- å®ç°å®¡è®¡æ—¥å¿—æŒä¹…åŒ–
- å®šæœŸæ›´æ–°ä¾èµ–åŒ…

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ `é¡¹ç›®ä»‹ç»å’Œæ¡†æ¶æ–‡æ¡£.md` äº†è§£å®Œæ•´åŠŸèƒ½
2. è¿è¡Œ `test_server.py` éªŒè¯åŸºç¡€åŠŸèƒ½
3. ä½¿ç”¨ MCP Inspector è°ƒè¯•
4. æŸ¥çœ‹ä»£ç ä¸­çš„æ³¨é‡Šå’Œ docstring
5. å‚è€ƒ FastMCP å®˜æ–¹æ–‡æ¡£ï¼šhttps://github.com/jlowin/fastmcp

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼** ğŸš€

**æœ€åæ›´æ–°ï¼š** 2026-01-27
