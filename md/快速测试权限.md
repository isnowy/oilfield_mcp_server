# å¿«é€Ÿæƒé™æµ‹è¯•æŒ‡å—

## ä½¿ç”¨ curl æµ‹è¯•æƒé™

### 1. æµ‹è¯• ADMIN ç”¨æˆ·ï¼ˆåº”è¯¥çœ‹åˆ°æ‰€æœ‰4å£äº•ï¼‰

```bash
curl -X POST http://localhost:8080/mcp/call-tool -H "Content-Type: application/json" -H "X-User-Role: ADMIN" -H "X-User-Email: admin@test.com" -H "X-User-ID: admin123" -d "{\"name\": \"search_wells\", \"arguments\": {\"keyword\": \"\", \"status\": \"All\"}}"
```

### 2. æµ‹è¯• User1ï¼ˆåº”è¯¥çœ‹åˆ°3å£äº•ï¼šZT-102, XY-009, ZT-108ï¼‰

```bash
curl -X POST http://localhost:8080/mcp/call-tool -H "Content-Type: application/json" -H "X-User-Role: USER" -H "X-User-Email: user1@test.com" -H "X-User-ID: 697c0cbebb4a93216518c3f9" -d "{\"name\": \"search_wells\", \"arguments\": {\"keyword\": \"\", \"status\": \"All\"}}"
```

### 3. æµ‹è¯• User2ï¼ˆåº”è¯¥çœ‹åˆ°2å£äº•ï¼šZT-105, ZT-108ï¼‰

```bash
curl -X POST http://localhost:8080/mcp/call-tool -H "Content-Type: application/json" -H "X-User-Role: USER" -H "X-User-Email: user2@test.com" -H "X-User-ID: 697c0cbebb4a93216518c3fd" -d "{\"name\": \"search_wells\", \"arguments\": {\"keyword\": \"\", \"status\": \"All\"}}"
```

### 4. æµ‹è¯•æƒé™æ‹’ç»ï¼ˆUser1å°è¯•è®¿é—®User2çš„äº•ï¼‰

```bash
curl -X POST http://localhost:8080/mcp/call-tool -H "Content-Type: application/json" -H "X-User-Role: USER" -H "X-User-Email: user1@test.com" -H "X-User-ID: 697c0cbebb4a93216518c3f9" -d "{\"name\": \"get_well_summary\", \"arguments\": {\"well_id\": \"ZT-105\"}}"
```

åº”è¯¥è¿”å›æƒé™æ‹’ç»ä¿¡æ¯ã€‚

## ä½¿ç”¨ PowerShell æµ‹è¯•

### ADMIN ç”¨æˆ·æµ‹è¯•
```powershell
$headers = @{
    "Content-Type" = "application/json"
    "X-User-Role" = "ADMIN"
    "X-User-Email" = "admin@test.com"
    "X-User-ID" = "admin123"
}
$body = @{
    name = "search_wells"
    arguments = @{
        keyword = ""
        status = "All"
    }
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:8080/mcp/call-tool" -Method Post -Headers $headers -Body $body
```

### User1 æµ‹è¯•
```powershell
$headers = @{
    "Content-Type" = "application/json"
    "X-User-Role" = "USER"
    "X-User-Email" = "user1@test.com"
    "X-User-ID" = "697c0cbebb4a93216518c3f9"
}
$body = @{
    name = "search_wells"
    arguments = @{
        keyword = ""
        status = "All"
    }
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:8080/mcp/call-tool" -Method Post -Headers $headers -Body $body
```

## æ³¨æ„äº‹é¡¹

âš ï¸ **å½“å‰æœåŠ¡å™¨è¿è¡Œåœ¨å¼€å‘æ¨¡å¼ï¼ˆDEV_MODE=trueï¼‰**

åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½èƒ½çœ‹åˆ°æ‰€æœ‰æ•°æ®ï¼ˆæƒé™æ£€æŸ¥è¢«è·³è¿‡ï¼‰ã€‚

è¦æµ‹è¯•çœŸå®çš„æƒé™æ§åˆ¶ï¼Œéœ€è¦ï¼š

### æ–¹æ³•1: ä¿®æ”¹ä»£ç 
åœ¨ `oilfield_mcp_http_server.py` ä¸­æ‰¾åˆ°ï¼š
```python
DEV_MODE = os.getenv("DEV_MODE", "true").lower() in ["true", "1", "yes"]
```
æ”¹ä¸ºï¼š
```python
DEV_MODE = os.getenv("DEV_MODE", "false").lower() in ["true", "1", "yes"]
```

### æ–¹æ³•2: è®¾ç½®ç¯å¢ƒå˜é‡
```powershell
# PowerShell
$env:DEV_MODE="false"
python oilfield_mcp_http_server.py

# CMD
set DEV_MODE=false
python oilfield_mcp_http_server.py
```

## é¢„æœŸç»“æœå¯¹ç…§è¡¨

| ç”¨æˆ·è§’è‰² | User ID | å¯è®¿é—®äº•å· | è¢«æ‹’ç»äº•å· |
|---------|---------|-----------|-----------|
| ADMIN | admin123 | ZT-102, ZT-105, ZT-108, XY-009 | æ—  |
| USER (user1) | 697c0cbebb4a93216518c3f9 | ZT-102, ZT-108, XY-009 | ZT-105 |
| USER (user2) | 697c0cbebb4a93216518c3fd | ZT-105, ZT-108 | ZT-102, XY-009 |
| GUEST | any | ZT-108 (ä»…å…¬å…±æ•°æ®) | ZT-102, ZT-105, XY-009 |

## æœåŠ¡å™¨æ—¥å¿—æŸ¥çœ‹

æƒé™è¿‡æ»¤æ—¶ä¼šè¾“å‡ºç±»ä¼¼æ—¥å¿—ï¼š
```
============================================================
ğŸ“‹ æå–ç”¨æˆ·ä¸Šä¸‹æ–‡
  è§’è‰²: USER
  é‚®ç®±: user1@test.com
  ç”¨æˆ·ID: 697c0cbebb4a93216518c3f9
============================================================
ğŸ”’ ç”¨æˆ· user1@test.com (USER) è®¿é—® 3/4 å£äº•
```
