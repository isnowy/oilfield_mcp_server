# 💬 自动图表生成 - 对话示例

## 📊 示例1：区块统计（自动生成柱状图）

### 对话流程

**用户**：
```
各区块有多少口井？
```

**系统（自动！）**：
```markdown
已查询到各区块的油井统计数据：

### 📊 油井统计（按区块分组）

| 名称    | 井数 | 平均设计井深(m) |
|---------|------|-----------------|
| Block-A | 12   | 3500.50         |
| Block-B | 8    | 2800.25         |
| Block-C | 5    | 4100.00         |

[这里会自动生成一个柱状图，显示各区块的油井数量对比]

**数据洞察**：
- Block-A是主要作业区块，拥有12口油井，占总数的48%
- Block-C虽然井数较少（5口），但平均井深最大（4100米），可能是深层勘探区
- 三个区块共计25口油井，平均井深约3467米
```

### 对比：优化前 vs 优化后

#### ❌ 优化前（需要2次对话）
```
用户：各区块有多少口井？
AI：[只显示表格]

用户：请画个图
AI：[生成图表]
```

#### ✅ 优化后（1次对话完成）
```
用户：各区块有多少口井？
AI：[表格 + 图表 + 分析]
```

---

## 📈 示例2：NPT对比（自动生成柱状图）

### 对话流程

**用户**：
```
对比ZT-102和ZT-105的NPT情况
```

**系统（自动！）**：
```markdown
已查询到ZT-102和ZT-105的NPT对比数据：

### ⚠️ NPT对比分析矩阵

#### 按事故类别统计（单位：小时）

| 井号    | 井漏 | 卡钻 | 设备故障 | 总NPT(小时) |
|---------|------|------|----------|------------|
| ZT-102  | 8.5  | 0    | 2.3      | 10.8       |
| ZT-105  | 0    | 5.2  | 1.0      | 6.2        |

#### 事故频次统计

| 井号    | 事故次数 |
|---------|---------|
| ZT-102  | 3       |
| ZT-105  | 2       |

[这里会自动生成一个柱状图，对比两口井的NPT总时长和各类事故时长]

**风险提示**：
- ZT-102的NPT总时长较高（10.8小时），需要重点关注
- ZT-102主要风险是井漏（8.5小时），建议检查泥浆密度和地层压力
- ZT-105的NPT相对较低，作业较为顺利
- 建议ZT-102借鉴ZT-105的作业经验，降低井漏风险
```

---

## 🥧 示例3：井型占比（自动生成饼图）

### 对话流程

**用户**：
```
各井型的统计
```

**系统（自动！）**：
```markdown
已查询到各井型的统计数据：

### 📊 油井统计（按井型分组）

| 名称     | 井数 | 平均设计井深(m) |
|----------|------|-----------------|
| 直井     | 15   | 3200.00         |
| 定向井   | 7    | 3800.50         |
| 水平井   | 3    | 4500.00         |

[这里会自动生成一个饼图，显示各井型的占比分布]
- 直井：60%
- 定向井：28%
- 水平井：12%

**分布分析**：
- 直井占主导地位（60%），是主要井型
- 定向井和水平井合计占40%，体现了技术多样化
- 水平井虽然数量少，但平均井深最大（4500米），技术难度较高
```

---

## 📅 示例4：日报查询（不生成图表）

### 对话流程

**用户**：
```
查看ZT-102的钻井日报
```

**系统（正常返回，不生成图表）**：
```markdown
请选择需要查询的日期：

ZT-102可用的日报日期：
1. 2024-01-25
2. 2024-01-24
3. 2024-01-23

请告诉我您需要查询哪一天的日报？
```

**说明**：这种情况不会生成图表，因为不是统计数据。

---

## 🔍 示例5：井详情查询（不生成图表）

### 对话流程

**用户**：
```
查询ZT-102的详细信息
```

**系统（正常返回，不生成图表）**：
```markdown
已查询到ZT-102的详细信息：

**基本信息**：
- 井号：ZT-102
- 区块：Block-A
- 井型：直井
- 设计井深：3500.50米
- 开钻日期：2024-01-15
- 项目名称：Block-A开发井

**当前状态**：
- 已完井
- 最新深度：3520米
```

**说明**：单条详情不会生成图表，只有统计/对比数据才会。

---

## 📈 示例6：趋势查询（自动生成折线图）

### 对话流程

**用户**：
```
ZT-102最近7天的钻进速度趋势
```

**系统（自动！）**：
```markdown
已查询到ZT-102最近7天的钻进速度数据：

### 📈 钻进速度趋势

| 日期       | 钻进速度(m/h) |
|------------|---------------|
| 2024-01-19 | 8.5           |
| 2024-01-20 | 9.2           |
| 2024-01-21 | 7.8           |
| 2024-01-22 | 10.1          |
| 2024-01-23 | 9.5           |
| 2024-01-24 | 9.0           |
| 2024-01-25 | 8.8           |

[这里会自动生成一个折线图，展示钻进速度的时间变化趋势]

**趋势分析**：
- 钻进速度在1月22日达到峰值（10.1 m/h）
- 整体波动范围为7.8-10.1 m/h，相对稳定
- 最近三天速度略有回落（9.5→9.0→8.8），建议关注地层变化
- 平均钻进速度为9.0 m/h，符合该井型的正常水平
```

---

## 🎯 触发规则总结

### ✅ 会自动生成图表的情况

| 查询类型 | 关键词 | 图表类型 |
|---------|--------|---------|
| 区块统计 | "各区块"、"统计" | 柱状图 |
| 项目对比 | "对比"、"各项目" | 柱状图 |
| 井型分布 | "井型"、"占比" | 饼图 |
| NPT对比 | "NPT"、"事故对比" | 柱状图 |
| 时间趋势 | "趋势"、"最近X天" | 折线图 |

### ❌ 不会生成图表的情况

| 查询类型 | 示例 | 原因 |
|---------|------|------|
| 详情查询 | "查询ZT-102详情" | 单条数据 |
| 日报查询 | "查看日报" | 非统计数据 |
| 井列表 | "搜索ZT开头的井" | 列表信息 |
| 帮助信息 | "怎么使用" | 纯文本 |

---

## 💡 使用技巧

### 1. 直接说出统计需求
```
✅ "各区块的油井统计"
✅ "对比ZT-102和ZT-105的NPT"
✅ "各井型的分布"
```

### 2. 不需要说"画图"
```
❌ "各区块的油井统计，画个图"  （多余）
✅ "各区块的油井统计"          （简洁，自动生成）
```

### 3. 明确查询范围
```
✅ "Block-A区块各项目的油井统计"
✅ "ZT-102最近7天的钻进速度趋势"
```

---

## 🎉 体验提升

通过自动图表生成功能：

- ⚡ **更快**：减少对话轮次（2步→1步）
- 🎯 **更准**：自动判断最佳图表类型
- 👍 **更爽**：无需手动要求可视化
- 📊 **更全**：同时获得数据表格、图表和分析

**让数据查询体验更流畅！**

---

**提示**：所有示例都基于实际的MCP Server实现，可以直接在LibreChat中测试。
